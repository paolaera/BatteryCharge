function [battery,energyDemand] = batteryChargeRete(battery,energyDemand,batteryRemain,SOC,maxCharge)

if batteryRemain == -1
    maxCharge15min = maxChargeForStep(maxCharge,SOC);
else
    maxCharge15min = batteryRemain;
end


if battery + maxCharge15min < maxCharge
    battery = battery + maxCharge15min;
    energyDemand = energyDemand + maxCharge15min;
else
    energyDemand = energyDemand - battery + maxCharge;
    battery = maxCharge;
end
